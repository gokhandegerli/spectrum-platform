server:
  port: 8080

spring:
  application:
    name: load-balancer

logging:
  level:
    com.degerli.loadbalancer: INFO
    root: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    export:
      prometheus:
        enabled: true

# =================================================
# Custom Load Balancer Configuration
# =================================================
loadbalancer:
  # Global algorithm
  algorithm: ROUND_ROBIN

  # Health Check
  health-check-enabled: true
  health-check-interval: 5000
  health-check-timeout: 2000

  # Circuit Breaker
  circuit-breaker:
    enabled: true
    failure-threshold: 5
    success-threshold: 2
    timeout-seconds: 60
    reset-timeout-seconds: 300

  # Rate Limiting
  rate-limit:
    enabled: false

  # SSL
  ssl:
    enabled: false

  # Sticky Sessions
  sticky-session:
    enabled: false

  # =================================================
  # Service Definitions with CORRECT hostnames & ports
  # =================================================
  services:
    # Kisakes Service
    kisakes:
      algorithm: ROUND_ROBIN
      upstreams:
        # Hostname: kisakes-app-1, Port: 8081 (docker-compose environment ile set edildi)
        - url: http://kisakes-app-1:8081
        - url: http://kisakes-app-2:8082

    # Dummy Service
    dummy-service:
      algorithm: ROUND_ROBIN
      upstreams:
        # Hostname: dummy-service-1, Port: 8083
        - url: http://dummy-service-1:8083
        - url: http://dummy-service-2:8084